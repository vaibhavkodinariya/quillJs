<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>User-Friendly Quill Editor</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/quill@2/dist/quill.snow.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/quill-table-better@1/dist/quill-table-better.css">

<style>
/* --- Main Card Container --- */
body {
  background: #f5f6fa;
  font-family: 'Segoe UI', Roboto, sans-serif;
  display: flex;
  justify-content: center;
  padding: 40px 10px;
}

.editor-card {
  width: 100%;
  border-radius: 20px;
  box-shadow: 0 12px 36px rgba(0,0,0,0.07);
  background: #fff;
  overflow: hidden;
  transition: all 0.3s ease;
}

/* --- Toolbar --- */
.ql-toolbar.ql-snow {
  position: sticky;
  z-index: 10;
  border: none;
  background: rgba(255,255,255,0.97);
  border-radius: 16px;
  padding: 12px;
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  font-size: 20px;
  box-shadow: 0 4px 18px rgba(0,0,0,0.12);
}

/* Toolbar buttons */
.ql-toolbar.ql-snow button,
.ql-toolbar.ql-snow .ql-picker {
  border-radius: 14px;
  height: 35px;
  margin: 2px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #fafafa;
  border: 1px solid #ddd;
  transition: all 0.2s ease;
  cursor: pointer;
}

.ql-toolbar.ql-snow button:hover,
.ql-toolbar.ql-snow .ql-picker-label:hover {
  background: #e8f0fe;
  border-color: #64b5f6;
}

.ql-toolbar.ql-snow button.ql-active,
.ql-toolbar.ql-snow .ql-picker-label.ql-active {
  background: #cce4ff;
  border-color: #2196f3;
  color: #0d47a1;
}

/* Increase width for font size dropdown */
.ql-toolbar.ql-snow .ql-size {
  min-width: 90px;
}

/* --- Editor Area --- */
.ql-container.ql-snow {
  border: none;
  border-top: 1px solid #eee;
}

.ql-editor {
  min-height: 500px;
  padding: 24px 28px;
  font-size: 17px;
  line-height: 1.8;
  color: #2c3e50;
  background: #fff;
}

/* Placeholder style */
.ql-editor.ql-blank::before {
  color: #aaa;
  font-style: italic;
}

/* --- Video Styling --- */
.ql-editor .ql-video-custom {
  display: block;
  width: 100%;
  max-width: 100%;
  height: auto;
  aspect-ratio: 16/9;
  border-radius: 12px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.12);
  object-fit: cover;
  margin: 1rem auto;
}

.ql-editor .ql-align-center .ql-video-custom { margin: 1rem auto; float: none; }
.ql-editor .ql-align-right .ql-video-custom { float: right; margin: 1rem 0 1rem 1rem; }
.ql-editor .ql-align-left .ql-video-custom { float: left; margin: 1rem 1rem 1rem 0; }

/* --- Image Styling --- */
.ql-editor img {
  max-width: 100%;
  display: block;
  margin: 1rem auto;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

/* --- Table Styling --- */
.ql-snow .ql-table-better {
  border-radius: 12px;
  padding: 8px 12px;
  background: #f4f5f8;
  border: 1px solid #ccc;
}

/* --- Responsive --- */
@media (max-width: 768px) {
  .ql-toolbar.ql-snow button,
  .ql-toolbar.ql-snow .ql-picker {
    height: 42px;
    padding: 0 6px;
  }
  .ql-toolbar.ql-snow .ql-size { min-width: 70px; }
  .ql-editor {
    padding: 18px 20px;
    font-size: 16px;
  }
}
</style>
</head>

<body>
<div class="editor-card">
  <div id="root"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/quill@2/dist/quill.js"></script>
<script src="https://cdn.jsdelivr.net/npm/quill-table-better@1/dist/quill-table-better.js"></script>

<script>
const BlockEmbed = Quill.import('blots/block/embed');

class VideoBlot extends BlockEmbed {
  static create(value) {
    let node = super.create();
    node.setAttribute('controls', true);
    node.setAttribute('src', value.url);
    node.setAttribute('class', 'ql-video-custom');
    node.style.width = value.width || '100%';
    node.style.height = value.height || '405px';
    return node;
  }
  static value(node) {
    return {
      url: node.getAttribute('src'),
      width: node.style.width,
      height: node.style.height
    };
  }
}
VideoBlot.blotName = 'video';
VideoBlot.tagName = 'video';
Quill.register(VideoBlot);
Quill.register({ 'modules/table-better': QuillTableBetter }, true);

const toolbarOptions = [
  ['bold','italic','underline','strike'],
  ['blockquote','code-block'],
  [{ 'header': 1 }, { 'header': 2 }],
  [{ 'list': 'ordered' }, { 'list': 'bullet' }, { 'list': 'check' }],
  [{ 'script': 'sub'}, { 'script': 'super' }],
  [{ 'indent': '-1'},{ 'indent': '+1' }],
  [{ 'direction': 'rtl' }],
  [{ 'align': [] }],
  [{ 'size': ['small', false, 'large', 'huge'] }],
  [{ 'color': [] }, { 'background': [] }],
  [{ 'font': [] }],
  ['link','image','video','formula'],
  ['clean'],
  ['table-better']
];

const editor = new Quill('#root', {
  theme: 'snow',
  placeholder: "Start writing your content...",
  modules: {
    toolbar: toolbarOptions,
    table: false,
    'table-better': { toolbarTable: true, menus: ['column','row','merge','table','cell','wrap','copy','delete'] },
    keyboard: { bindings: QuillTableBetter.keyboardBindings }
  }
});

// Drag & Drop & Paste Files
const root = document.querySelector('#root');
function handleFiles(files) {
  const range = editor.getSelection();
  if(!range) return;
  for(let file of files){
    if(file.type.startsWith('image/')){
      const reader = new FileReader();
      reader.onload = e => editor.insertEmbed(range.index,'image',e.target.result,'user');
      reader.readAsDataURL(file);
    } else if(file.type.startsWith('video/')){
      const url = URL.createObjectURL(file);
      editor.insertEmbed(range.index,'video',{url,width:'100%',height:'405px',align:'center'},'user');
    }
  }
}
root.addEventListener('drop', e => { e.preventDefault(); e.stopPropagation(); handleFiles(e.dataTransfer.files); });
root.addEventListener('dragover', e => e.preventDefault());
root.addEventListener('paste', e => {
  const items = e.clipboardData.items;
  const files = [];
  for(let i=0;i<items.length;i++){
    const item = items[i];
    if(item.kind==='file'){ const file=item.getAsFile(); if(file) files.push(file); }
  }
  if(files.length>0){ e.preventDefault(); e.stopPropagation(); handleFiles(files); }
});
</script>
</body>
</html>
